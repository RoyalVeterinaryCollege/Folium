<!--

Copyright 2017 The Royal Veterinary College, jbullock AT rvc.ac.uk, pnunn AT rvc.ac.uk

This file is part of Folium.

Folium is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Folium is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Folium.  If not, see <http://www.gnu.org/licenses/>.

-->
<section class="title">
  <div class="container">
    <div class="d-flex justify-content-start">
      <div class="mr-auto">
        <h1 class="text-uppercase p-1 m-0"><span class="folium-skills small"></span> Skills</h1> 
      </div>
        <div *ngIf="skillGroups" class="p-1">
          <skill-search [skillSet]="skillset"></skill-search>
        </div>
        <div *ngIf="skillGroups" class="p-1">
          <button class="btn btn-secondary float-right" (click)="filterModal.show()"><span class="hidden-sm-down">Filter</span><span class="hidden-md-up"><i class="fa fa-filter" aria-hidden="true"></i></span><span *ngIf="filterCount > 0">({{filterCount}})</span></button>
        </div>      
    </div>
  </div>
</section>
<section class="content-main">
  <div class="container">
    <div class="row">
      <div class="col">        
        <!-- Loading... --> 
        <div *ngIf="!skillSets" class="loader-container">
            <div class="loader primary">Loading...</div>
          </div>
        <div *ngIf="skillSet">
          <h2>{{skillSet.name}} <small *ngIf="skillSets && skillSets.length > 1"><i class="folium-skills-choice" aria-hidden="true" role="button" (click)="onChangeSkillSetClick()" aria-label="Change Skill Set" title="Change Skill Set"></i></small></h2>
        </div>
        <!-- No Skill Sets... -->
        <div *ngIf="skillSets && skillSets.length === 0" class="row">
          <div class="col">
            <div class="app-card">
              <div class="card-block">
                Looks like you don't have any skill sets, please <a [routerLink]="" (click)="onSelectUserSkillSetClick()">select one</a>.
              </div>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="filters.length > 0" class="mb-2">
          <div class="d-flex justify-content-start flex-wrap">
            <mat-chip-list>
              <mat-chip [attr.aria-label]='"remove " + filter.name + " filter"' *ngFor="let filter of filters" (click)="onRemoveFilterFacetClick(filter)">
                {{filter.name}} <i class="fa fa-times-circle" aria-hidden="true"></i>
              </mat-chip>
            </mat-chip-list>
            <mat-chip-list class="ml-auto">
              <mat-basic-chip [attr.aria-label]='"clear all filters"' (click)="onRemoveAllFilterFacetsClick()">
                <i class="fa fa-times-circle" aria-hidden="true"></i> Clear Filters
              </mat-basic-chip>
            </mat-chip-list>
          </div>
        </div>	
        <skill-group-list *ngIf="skillGroups" [skillSetId]="skillSet.id" [skillGroups]="skillGroups" [autoSave]="autoSave" (selfAssessmentChange)="selfAssessmentChange.emit($event)"></skill-group-list>
        <!-- Loading Skills... -->
        <div *ngIf="skillSet && !skillGroups" class="loader-container">
          <div class="loader primary">Loading...</div>
        </div>
      </div>
    </div>
  </div>
</section>
<!--Filter Model-->
<div bsModal #filterModal="bs-modal" [config]="{backdrop: false}" class="modal fade" tabindex="-1" role="dialog" aria-label="Filters" aria-hidden="true">
  <div class="modal-dialog modal-full-screen">
    <div class="container">
      <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title pull-left">Filter Skills</h2>
            <button type="button" class="close" (click)="filterModal.hide()" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="filter-box row">
              <div *ngIf="skillSet" class="filter-container col">
                <skill-filters [skillSetId]="skillSet.id"></skill-filters>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <div class="w-100 d-flex justify-content-between">
              <button class="btn btn-link" (click)="onRemoveAllFilterFacetsClick()"> Clear All </button>
              <button class="btn btn-primary btn-shadow" (click)="filterModal.hide()"> Done </button>
            </div>
          </div>
      </div>
    </div>
  </div>
</div>
 
